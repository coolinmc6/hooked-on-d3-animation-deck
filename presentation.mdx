import { Appear, Notes } from "mdx-deck";
import { Split, FullScreenCode } from "mdx-deck/layouts";

export { prism as theme } from "mdx-deck/themes";

# Hooked on D3

## Creating Animated Ch(art)s with D3 and React Hooks

<Notes>

- Only visible in presenter mode
- Markdown syntax can be used with empty lines around the content

</Notes>

---

# Hi, I'm Monica

<Appear>
  <h2>Netguru</h2>
  <h2>Polish/American</h2>
  <h2>outdoors</h2>
  <h2>some other emoji about me</h2>
</Appear>

---

## There has to be a better way

(UPenn logo)

<Notes>

- personal story about my starts in programming through D3

</Notes>

---

export default Split;

<Appear>
<div>
  <h2>React</h2>
  <h2>D3</h2>
  <h2>Cooking at high end restaurants...</h2>
</div>

<h1>?</h1>

</Appear>

<Notes>

- And today, other than talking to you about code, I’ll be sharing some secrets of the art of cooking at a 5-star restaurant…
- So keep that in mind
- But before we jump right into what the title of this presentation promised, “Creating Animated Ch(art)s with D3 and React hooks”, I think we need to take a step back and focus on one word: Animated

</Notes>

---

# Creating Animated Charts with D3 and React Hooks

---

# Creating **Animated** Charts with D3 and React Hooks

---

# Why animation?

<Notes>

- Time and Change = Transformation;
  - Actually Change / Time = Transformation
- gives the user continuity
- brings something to life
- directs their attention
- A reaction to our action (communication of cause-and-effect)
- A clue that ‘something is happening’ (e.g. Loading component)
- shows connection / relationship with time
- MORE INFORMATION (not just the snapshots of reality, but their collection)
- …but LESS TO PROCESS AT ONE TIME (like object continuity -> We prefer continuity because our eye then only needs to follow one piece of information, not two simultaneously (remember x1 and then draw attention to x2 -> rather, we just keep our eye on xi the entire time)
  - It hints that the takeaway is not in each single frame, but in the space between them. In their relation to one another.

</Notes>

---

# Animation in charts?

<Notes></Notes>

---

# Salt vs. Spices

<Notes>

- Salt and spices
  - Show a picture of SALT and SPICES and talk about it
  - When I was a bit younger, I had a sort of phase where I was absolutely intrigued by spices. This was software year in college, was learning to cook, and I frankly I think I just had a bit too much time on my hands :P
  - I was so taken by these, and trying to understand them, that it even led to one of my first-ever data visualizations: I call it ‘Spices made simple’
    - has the X most common spices, and you can click into it to see what it works well with; what veggies, what sources of protein, what types of sauces…
  - BUT since then, a lot has changed. Where I live, what I do, anddd how I cook. It’s safe to say my spices are gathering dust on the shelf. Instead, I’ve found that most times, a little salt goes a long way. I don’t want to mask the flavors, I just want to bring them out a bit - to enhance them! Unify them.
  - And while I’m happy to share the background of my cooking phases and practices with you, the real reason I’m telling this story is because salt and spices represent two different approaches to animation in data visualization. And just like a balance of salt and spices wins out in the long run in terms of my cooking habits, this balance is a winner when it comes to ‘when and how to animate charts’ as well
  - What do I mean?
    - Salt enhances the underlying elements, but it does not overshadow them
    - Spices, change the flavor profile; they bring your senses to different features
    - It’s actually a combo of salt and spices. We want to direct and disturb focus in the appropriate manner.
  - But the trick isn’t just to add salt and add spices, but to add them where they are applicable (there is information in the way you share information)

</Notes>

---

# _When_ to add salt and spices?

<Notes>

- aka when to add animation to data visualization
- The wrong approach: ‘what animation should we add’ (what spices should we add?)
- The right approach: ‘what animation is our data holding/calling for’ (what are the ingredients asking for?)
  - Transitioning between states (change within group) -> object continuity (A -> A)
    - Position change
    - Shows relationship because it maintains my focus on particular elements
  - Transitioning between states (change of group) (A -> B)
    - Dataset change
    - Shows lack of a relationship between A and B because it interrupts my focus on particular elements
  - Animation as explanation (narration, storytelling)
  - Transition over time (real-time data) NICU (same dataset, but growing)
- It really comes down to three places where animation can add be used to enhance its underlying elements:
  - 1. New dataset (spice, interrupt my current focus, change the flavor)
  - 2. New element in dataset (aka change to dataset) (salt / spice?)
  - 3. Change to element in dataset (salt, maintain my current focus)

</Notes>

---

## _How_ to add salt and spices?

<Notes>

- aka. how to add animation to data visualisations
- So now we understand that animation can add a lot to a visualization, which is great, but it would probably be helpful to know how to implement this as well ;)
- We talked about spices and salt, so let’s take a look at who would be adding those to a dish:

</Notes>

---

# You can’t have two cooks in the kitchen

<Notes>

- have you ever heard the saying, you can’t have two cooks in the kitchen?
- It makes sense right? How can you have one pot, one knife, one cutting board, one set of ingredients, and expect two cooks to create a dish?
- (insert image of two chefs)
- a brief descrription of our two cooks: react (faux DOM) and D3 (DOM)
- There are three ways this situation could play out:

</Notes>

---

# Option 1: Cook1 (React) takes control

---

# Option 2: Cook2 (D3) takes control

---

# Option 3: Cook1 (React) and Cook2 (D3) share control

<Notes>

- React (cook1) preps the ingredients and the pot, D3 (cook2) puts everything in its place

</Notes>

---

# Option 3 w/Hooks: Chef and Jeux Chef <3

<Notes>

- But there’s a difference between working together, and working together in an straightforward, predictable, organised manner:
- not Cook1 and Cook2 but chef and jeux chef!
- They need clear communication in order to make their collaboration work. This is where React Hooks come in!
- The chef (React) tells the jeux chef (D3) when it needs his/her help, and then gives it free reign to work it’s magic
- React prepares the dish and D3 adds the embellishments, the animations
  - Everything the jeux chef does is a side effect, he is making changes to the dish that the chef didn’t make himself
  - But just like in the kitchen, it’s best if one cook adds the spices, so too is true in data viz. react gives the cue, the recipe, and d3 adds the salt and spices.

</Notes>

---

# Let’s take a look at an example of the Chef and Jeux Chef at work!

<Notes>

- This is what we will be preparing today: The Non-boring Keyboard ala Monica :)
  - the inspiration for this dish is the question ‘how come the keyboard is laid out the way it is?’
  - Description:
    - Each key on my keyboard represents a bar/column in the chart
    - When each key is hit, the bar grows and then falls again (to show that something is being added) and a point is added above it so that we get the distribution of keys over time
    - We can view the data in several ways
      - x-axis is letter order, either based on the keyboard left to right or based on the English alphabet
      - y-axis is either the index of the element added (so we can see a distribution of letters over time) or the cumulative view (so we can see which letters are used most often)
- So let’s make it! to begin, we’re gonna let the chef set things up for us:
  - Sets up the recipe
    - Data useState
  - Gets the pot ready
    - Sets up dimensions
    - Create SVG container
  - Maps the recipe elements to ingredients
    - Create elements based on that data
- Now the chef needs to tell the jeux chef where and when he can take control
  - useRef (where)
  - useEffect (when)
- And when it’s his time, the jeux chef works his magic
  - updateFunction

</Notes>

---

<Appear>
  - Animation (salt and spices) - No two cooks in the kitchen - Chef and jeux
  chef need to have proper communication / delegation of responsibilities for a
  dish to taste good :) - Bon appetit XD
</Appear>

<Notes>

-To Summarize:

- Animation (salt and spices)
  - When it comes to charts, with animation we’re really talking about animated transitions (make visual changes natural/seamless to keep us immersed, a unified whole, a ‘continuation’ of the story). Spices and salt, (animations) should serve to unify the whole. No longer separate ingredients, but a unified flavour profile.
- No two cooks in the kitchen
  - If you’re using D3 with React, put it in its place! It’s a side effect because it affects the DOM in ways outside of directly React. So place it in useEffect
    - “Anything that results in changes that can be observed when the calculation is completed, beside the return value of the calculation itself, is a side effect.”
    - “Calculation should return just result of the calculation. Anything else is side-effect.”
- Chef and jeux chef need to have proper communication / delegation of responsibilities for a dish to taste good :)
  - Chef:
    - useState, useRef, useEffect
  - Jeux Chef:
    - Update function
- Bon appetit XD

</Notes>

---

<FullScreenCode>

```jsx
import Accordian from '../components/Accordian'

# Here's an Accordian

It's rendered inside our MDX document.

<div>test test <span style={{ color: blue}}>blue</span></div>
```

</FullScreenCode>

---

# What is MDX-Deck?

---

## MDX-based presentations

---

# What can it do?

<Appear>
  <h2>📝 Write presentations in markdown</h2>
  <h2>⚛️ Import and use React components</h2>
  <h2>💅 Customizable themes and components</h2>
  <h2>0️⃣ Zero-config CLI</h2>
  <h2>💁 Presenter mode</h2>
  <h2>📓 Speaker notes</h2>
</Appear>

---

export default Split;

# Alternative layouts?

Sweet!

---

...but coolest of all..

---

import App from "./components/App/App";

export default Split;

### React Components inside Markdown

<App />

---

Any type of components!

---

import { LiveProvider, LiveEditor, LiveError, LivePreview } from "react-live";

### <a href="https://github.com/formidablelabs/react-live" target="_blank">react-live</a>

<br />

<LiveProvider code="<strong>Hello World!</strong>">
  <LiveEditor />
  <LiveError />
  <br />
  <LivePreview />
</LiveProvider>

---

## In fact...

This is an mdx-deck presentation.

```

```
